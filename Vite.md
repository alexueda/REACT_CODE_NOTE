+++
# Vite
📖 詳しく読む: Vite

React の基本をカバーしたところで、Simon や他のスタートアップアプリケーションに JSX、縮小化、ポリフィル、バンドリングを使用できるように、完全な Web フレームワークツールチェーンを導入したいと考えています。これらの技術を活用するための一般的な方法の一つは、コマンドラインインターフェイス（CLI）を使って Web アプリケーションを初期設定することです。CLI を使用すると、ツールチェーンのパラメータを手動で設定する手間が省け、デフォルトのアプリケーションですばやく作業を開始できます。

私たちのツールチェーンには Vite を使用します。Vite はコードを素早くバンドルし、優れたデバッグサポートがあり、JSX、TypeScript、さまざまな CSS フレーバーを簡単にサポートできます。Vite を使い始めるために、まずシンプルな Web アプリケーションを構築してみましょう。その後、Simon を React で再構築し、Vite の使用方法を習得してスタートアップに React を導入できるようにします。

新しい React ベースの Web アプリケーションを Vite を使って作成するには、コンソールを開いて次のコマンドを実行します。

    npm create vite@latest demoVite -- --template react
    cd demoVite
    npm install
    npm run dev

この操作で demoVite ディレクトリに新しい Web アプリケーションが作成され、必要なサードパーティのパッケージがダウンロードされ、ローカルの HTTP デバッグサーバーでアプリケーションが起動されます。`o`キーを押すと Vite によってアプリケーションがホストされている URL がブラウザで開かれ、`h`を押すと Vite CLI の全オプションが表示されます。

## Vite デモ

おめでとうございます！初めての React 対応 Web アプリケーションが作成されました。

ブラウザでアプリケーションを操作した後、コンソールに戻り、`q`を押すと Vite のホスティングを停止できます。

### 生成されたプロジェクト
次に、Vite が作成したアプリケーションファイルを確認します。コンソールから VS Code（`code .`）を使用してプロジェクトディレクトリを開き、ファイルを確認しましょう。

| ディレクトリ | ファイル                | 用途                                                                 |
|--------------|--------------------------|----------------------------------------------------------------------|
| `./`         | `index.html`             | アプリケーションのメインページ。`main.jsx` から始まるすべての JSX コンポーネントを読み込みます。|
|              | `package.json`           | パッケージの依存関係やスクリプトコマンドの定義。`npm run dev` で Vite を起動。 |
|              | `package-lock.json`      | 含まれるパッケージのバージョン制約（編集不可）。                       |
|              | `vite.config.js`         | Vite の設定。特に開発用の React の設定が含まれています。                |
| `./public`   | `vite.svg`               | favicon としての利用やアプリ内で表示される Vite ロゴ。                |
| `./src`      | `main.jsx`               | コード実行のエントリーポイント。`App.jsx` の App コンポーネントをロードします。 |
|              | `index.css`              | アプリケーション全体の CSS。                                          |
|              | `App.jsx`                | アプリケーショントップレベルの JSX コンポーネント。ログを表示し、クリックカウンターを実装。 |
|              | `App.css`                | トップレベルアプリケーションコンポーネント用の CSS。                   |
| `./src/assets` | `react.svg`             | アプリで表示される React ロゴ。                                       |

アプリケーションの主なファイルは `index.html`、`main.jsx`、`App.jsx` です。ブラウザは `index.html` を読み込み、React アプリケーションが注入される HTML 要素 (`#root`) を提供します。また、`main.jsx` を読み込むためのスクリプト要素も含まれています。

`main.jsx` は、`#root` 要素と `App.jsx` 内の App コンポーネントを関連付けることで React アプリケーションを作成します。これにより、すべてのコンポーネントのレンダリング関数が実行され、生成された HTML、CSS、および JavaScript が `index.html` によって実行されます。

## ファイルの関係

### JSX vs JS
Vite CLI は、JavaScript `.js` 拡張子の代わりに `.jsx` 拡張子を JSX ファイルに使用します。Babel トランスパイラーはどちらでも動作しますが、一部のエディタツールは拡張子によって異なる動作をします。このため、JSX を含むファイルには `.jsx` を推奨します。このトピックについては、AirBNB の開発者による興味深い議論があるので、異なる意見を知りたい場合は参照してみてください。

### プロダクションリリースのビルド
`npm run dev` を実行すると、Vite のデバッグ HTTP サーバーが読み込む一時ディレクトリにコードがバンドルされます。プロダクション環境にデプロイできるようにアプリケーションをバンドルする場合は、`npm run build` を実行する必要があります。これにより、`package.json` にあるビルドスクリプトが実行され、Vite CLI が起動します。`vite build` はトランスパイル、縮小化、適切な JavaScript の挿入を行い、デプロイ準備が整ったバージョンを `dist` という名前のディストリビューションサブディレクトリに出力します。

    ➜  npm run build

    > demovite@0.0.0 build
    > vite build

    vite v4.3.7 building for production...
    ✓ 34 modules transformed.
    dist/index.html                   0.45 kB │ gzip:  0.30 kB
    dist/assets/react-35ef61ed.svg    4.13 kB │ gzip:  2.14 kB
    dist/assets/index-51439b3f.css    1.42 kB │ gzip:  0.74 kB
    dist/assets/index-58d24859.js   143.42 kB │ gzip: 46.13 kB
    ✓ built in 382ms
